"use strict";const listDrinks=document.querySelector(".js-list"),urlServer="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",urlPlaceholder="https://via.placeholder.com/210x295/BBACEB/666666/?text=coctelphoto",inputSearch=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-btn-search"),message=document.querySelector(".js-message"),favList=document.querySelector(".js-fav-list"),btnReset=document.querySelector(".js-btn-reset");let listFavouritesDrinks=[],drinks=[];const getLocalStorage=localStorage.getItem("drinksFav");function paintDrinks(){let e="";for(const i of drinks){let t="";-1!==listFavouritesDrinks.findIndex(e=>e.idDrink===i.idDrink)&&(t="title-drink"),e+=`<li class= "js-drinks ${t}" id=${i.idDrink}>`,e+=`<h2 class="main__list-container__list__item-title">${i.strDrink}</h2>`,e+=`<img class = "main__list-container__list__item-title__drinks-photo" src=${i.strDrinkThumb||urlPlaceholder} alt ="Foto bebida"/>`,e+="</li>"}listDrinks.innerHTML=e,message.innerHTML=""}function paintFavDrinks(){let e="";for(const i of listFavouritesDrinks)e+=`<li class="js-drinks-fav" id=${i.idDrink}>`,e+=`<h2 class="main__list-container__list__item-title">${i.strDrink}<i class="fa-solid fa-bookmark"></i></h2>`,e+=`<img class="main__list-container__list__item-title__drinks-photo" src=${i.strDrinkThumb||urlPlaceholder} alt ="Foto bebida"/>`,e+="</li>";favList.innerHTML=e}function removeDrinkFav(e){const i=e.currentTarget.id,t=listFavouritesDrinks.findIndex(e=>e.idDrink===i);listFavouritesDrinks.splice(t,1),paintDrinks(),addFavListener(),paintFavDrinks(),removeFavListener()}function removeFavListener(){const e=document.querySelectorAll(".js-drinks-fav");for(const i of e)i.addEventListener("click",removeDrinkFav)}function handleClickFav(e){const i=e.currentTarget.id,t=drinks.find(e=>e.idDrink===i),n=listFavouritesDrinks.findIndex(e=>e.idDrink===i);-1===n?(listFavouritesDrinks.push(t),e.currentTarget.classList.add("title-drink")):(listFavouritesDrinks.splice(n,1),e.currentTarget.classList.remove("title-drink")),localStorage.setItem("drinksFav",JSON.stringify(listFavouritesDrinks)),paintFavDrinks(),removeFavListener()}function addFavListener(){const e=document.querySelectorAll(".js-drinks");for(const i of e)i.addEventListener("click",handleClickFav)}function handleClickSearch(e){e.preventDefault(),""===inputSearch.value?(message.innerHTML="* introduce un término de búsqueda",listDrinks.innerHTML=""):fetch(urlServer+inputSearch.value).then(e=>e.json()).then(e=>{drinks=e.drinks||[],paintDrinks(),addFavListener()})}function handleClickReset(){listDrinks.innerHTML="",favList.innerHTML="",inputSearch.value=""}listFavouritesDrinks=JSON.parse(getLocalStorage),null===listFavouritesDrinks&&(listFavouritesDrinks=[]),paintFavDrinks(),removeFavListener(),btnSearch.addEventListener("click",handleClickSearch),btnReset.addEventListener("click",handleClickReset);