"use strict";const listDrinks=document.querySelector(".js-list"),urlServer="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=",urlPlaceholder="https://via.placeholder.com/210x295/BBACEB/666666/?text=coctelphoto",inputSearch=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-btn-search"),message=document.querySelector(".js-message"),favList=document.querySelector(".js-fav-list");let listFavouritesDrinks=[],drinks=[];const getLocalStorage=localStorage.getItem("drinksFav");function paintDrinks(){let i="";for(const e of drinks){let t="";-1!==listFavouritesDrinks.findIndex(i=>i.idDrink===e.idDrink)&&(t="title-drink"),i+=`<li class= "js-drinks ${t}" id=${e.idDrink}>`,i+=`<h2 class="main__list-container__list__item-title">${e.strDrink}</h2>`,i+=`<img class = "main__list-container__list__item-title__drinks-photo" src=${e.strDrinkThumb||urlPlaceholder} alt ="Foto bebida"/>`,i+="</li>"}listDrinks.innerHTML=i,message.innerHTML=""}function paintFavDrinks(){let i="";for(const e of listFavouritesDrinks)i+=`<li class="js-drinks-fav" id=${e.idDrink}>`,i+=`<h2 class="main__list-container__list__item-title">${e.strDrink}<i class="fa-solid fa-bookmark"></i></h2>`,i+=`<img class="main__list-container__list__item-title__drinks-photo" src=${e.strDrinkThumb||urlPlaceholder} alt ="Foto bebida"/>`,i+="</li>";favList.innerHTML=i}function removeDrinkFav(i){const e=i.currentTarget.id,t=listFavouritesDrinks.findIndex(i=>i.idDrink===e);listFavouritesDrinks.splice(t,1),paintFavDrinks(),removeFavListener()}function removeFavListener(){const i=document.querySelectorAll(".js-drinks-fav");for(const e of i)e.addEventListener("click",removeDrinkFav)}function handleClickFav(i){const e=i.currentTarget.id,t=drinks.find(i=>i.idDrink===e),r=listFavouritesDrinks.findIndex(i=>i.idDrink===e);-1===r?(listFavouritesDrinks.push(t),i.currentTarget.classList.add("title-drink")):(listFavouritesDrinks.splice(r,1),i.currentTarget.classList.remove("title-drink")),localStorage.setItem("drinksFav",JSON.stringify(listFavouritesDrinks)),paintFavDrinks(),removeFavListener()}function addFavListener(){const i=document.querySelectorAll(".js-drinks");for(const e of i)e.addEventListener("click",handleClickFav)}function handleClickSearch(i){i.preventDefault(),""===inputSearch.value?(message.innerHTML="* introduce un término de búsqueda",listDrinks.innerHTML=""):fetch(urlServer+inputSearch.value).then(i=>i.json()).then(i=>{drinks=i.drinks,paintDrinks(),addFavListener()})}listFavouritesDrinks=JSON.parse(getLocalStorage),null===listFavouritesDrinks&&(listFavouritesDrinks=[]),paintFavDrinks(),removeFavListener(),btnSearch.addEventListener("click",handleClickSearch);